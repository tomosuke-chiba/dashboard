# 開発マイルストーン

## プロジェクト概要

**プロジェクト名**: 求人媒体ダッシュボード
**MVP期限**: 1〜2週間以内
**初期テスト対象**: 17件のクライアント

---

## マイルストーン一覧

| Phase | マイルストーン | ステータス |
|-------|---------------|-----------|
| 0 | 要件定義・設計 | ✅ 完了 |
| 1 | 環境構築 | ✅ 完了 |
| 2 | データベース構築 | ✅ 完了 |
| 3 | スクレイピング機能 | ✅ 完了 |
| 4 | ダッシュボードUI | ✅ 完了 |
| 5 | 通知機能 | 🔄 コード完了（Webhook URL設定待ち） |
| 6 | 定期実行設定 | ⬜ 未着手 ← 次のステップ |
| 7 | テスト・デプロイ | ⬜ 未着手 |

---

## Phase 0: 要件定義・設計 ✅ 完了

- [x] ヒアリング・要件整理
- [x] 要件定義書作成
- [x] 技術スタック決定
- [x] データベース設計

---

## Phase 1: 環境構築 ✅ 完了

- [x] Next.js 16 プロジェクト作成
- [x] TypeScript 設定
- [x] Tailwind CSS 設定
- [x] パッケージインストール（Supabase, Playwright, Recharts）
- [x] ディレクトリ構造作成
- [x] 型定義ファイル作成
- [x] 環境変数設定（.env.local）
- [x] Playwright ブラウザインストール

---

## Phase 2: データベース構築 ✅ 完了

- [x] Supabase プロジェクト作成
- [x] `clinics` テーブル作成
- [x] `metrics` テーブル作成（日別データ対応）
- [x] 17件のクライアントデータ投入（CSVインポート）
- [x] Supabase クライアント接続確認

---

## Phase 3: スクレイピング機能 ✅ 完了

- [x] GUPPY ログインページ構造調査
- [x] ログイン処理実装
- [x] アクセスログページナビゲーション
- [x] 日別データ取得（表示数、閲覧数、自社サイト誘導、応募数）
- [x] 過去6ヶ月分データ取得対応
- [x] エラーハンドリング実装
- [x] 全16クライアントで動作確認（184日分/クライアント）

### 成果物
- `src/lib/scraper.ts`
- `/api/scrape` エンドポイント

---

## Phase 4: ダッシュボードUI ✅ 完了

- [x] サマリーカードコンポーネント
- [x] 日別データテーブル表示
- [x] 月別切り替え機能
- [x] クライアント一覧ページ (`/clinic`)
- [x] クライアント別ページ (`/clinic/[slug]/guppy`)
- [x] メディア別タブ（GUPPY/ジョブメドレー/Quacareer）
- [x] レスポンシブ対応

### 画面一覧

| ページ | URL | 説明 |
|--------|-----|------|
| クライアント一覧 | `/clinic` | 全クライアント一覧（HOME） |
| GUPPY | `/clinic/[slug]/guppy` | GUPPYデータ表示 |
| ジョブメドレー | `/clinic/[slug]/job-medley` | Coming Soon |
| Quacareer | `/clinic/[slug]/quacareer` | Coming Soon |

---

## Phase 5: 通知機能 🔄 コード完了

- [x] Discord Webhook 連携コード実装
- [x] 新規応募検知ロジック実装
- [x] 通知メッセージフォーマット作成
- [ ] Discord Webhook URL設定

### 成果物
- `src/lib/discord.ts`

---

## Phase 6: 定期実行設定 ⬜ 未着手 ← 次のステップ

- [ ] Vercel Cron 設定
- [ ] 10分間隔の定期実行設定
- [ ] CRON_SECRET による認証設定

### Vercel Cron 設定例

```json
// vercel.json
{
  "crons": [
    {
      "path": "/api/scrape",
      "schedule": "*/10 * * * *"
    }
  ]
}
```

---

## Phase 7: テスト・デプロイ ⬜ 未着手

- [ ] Vercel へデプロイ
- [ ] 本番環境変数設定
- [ ] ドメイン設定
- [ ] 動作確認（本番環境）
- [ ] クライアントへURL共有

---

## 進捗サマリー

```
Phase 0: 要件定義・設計    [████████████████████] 100%
Phase 1: 環境構築          [████████████████████] 100%
Phase 2: データベース構築   [████████████████████] 100%
Phase 3: スクレイピング機能 [████████████████████] 100%
Phase 4: ダッシュボードUI   [████████████████████] 100%
Phase 5: 通知機能          [████████████████░░░░]  80%
Phase 6: 定期実行設定      [░░░░░░░░░░░░░░░░░░░░]   0% ← 次のステップ
Phase 7: テスト・デプロイ   [░░░░░░░░░░░░░░░░░░░░]   0%

全体進捗: ████████████████░░░░ 83%
```

---

## 次のアクション

1. **Discord Webhook URL設定**: .env.localにWebhook URLを追加
2. **Phase 6 開始**: Vercel Cron設定
3. **Phase 7**: Vercelにデプロイ

---

## 変更履歴

| 日付 | 内容 |
|------|------|
| 2024-12-29 | 初版作成 |
| 2024-12-29 | Phase 3, 4完了、17クライアント対応 |
