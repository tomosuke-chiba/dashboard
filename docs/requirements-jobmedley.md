# ジョブメドレー 要件定義書

## 1. 概要

| 項目 | 内容 |
|------|------|
| 媒体名 | ジョブメドレー |
| URL | https://job-medley.com |
| 課金体系 | 閲覧無料 + スカウト月100通無料 |
| 認証方式 | ID + パスワード（要確認） |
| 実装状況 | スクレイパー/ダッシュボード実装済み（検索順位は設定が必要） |

---

## 2. 採用の流れとKPI

### 2.1 採用ルート

**ルート1: 検索経由（メイン）**
```
検索結果表示
  ↓
検索順位上位化 ← 最重要ポイント
  ↓
閲覧（無料）
  ↓
申込
  ↓
採用
```

**ルート2: スカウトメール経由**
```
スカウトメール送信（月100通無料）
  ↓
返信
  ↓
採用
```

### 2.2 KPI指標

| 指標 | 重要度 | 備考 |
|------|--------|------|
| **検索順位** | 最重要 | 閲覧無料のため、順位上位化が命題 |
| スカウト返信率 | 重要 | 競合優位性は低い（他社も無料で送信可能） |

### 2.3 GUPPYとの違い

| 項目 | GUPPY | ジョブメドレー |
|------|-------|----------------|
| 閲覧課金 | あり（100円/閲覧） | なし |
| スカウト費用 | 1,000円/通 | 無料（月100通まで） |
| 最重要施策 | プロフィール最適化で閲覧→申込率UP | 検索順位を上げて閲覧数UP |

---

## 3. データ取得仕様

### 3.1 検索順位

| 項目 | 詳細 |
|------|------|
| 取得方法 | 検索結果ページをスクレイピング |
| 検索条件 | 地域・職種で絞り込み |
| マッチング | 医院名で特定 |
| 更新頻度 | 1日1回 |

### 3.2 スカウトメールデータ

| 項目 | 詳細 |
|------|------|
| 送信数 | 管理画面から取得（月100通の消化状況） |
| 返信数 | 管理画面から取得 |
| 更新頻度 | 1日4回 |

### 3.3 閲覧データ（要調査）

| 項目 | 詳細 |
|------|------|
| 表示数 | 管理画面で確認可能か要調査 |
| 閲覧数 | 管理画面で確認可能か要調査 |
| 応募数 | 管理画面で確認可能か要調査 |

---

## 4. データベース設計

### 4.1 metrics テーブル

既存テーブルを流用
- `source = 'jobmedley'` で識別
- `job_type` で職種を識別
- `search_rank` に検索順位を保存

### 4.2 scout_messages テーブル

既存テーブルを流用
- `source = 'jobmedley'` で識別

### 4.3 clinics テーブル（検索順位設定）

| カラム | 詳細 |
|--------|------|
| jobmedley_clinic_name | 検索結果でマッチングする医院名 |
| jobmedley_search_url | 検索順位チェック用の検索URL |

### 4.4 jobmedley_analysis テーブル

| カラム | 詳細 |
|--------|------|
| period_year / period_month | 月次分析の対象年月 |
| hire_count | 採用決定数 |
| application_count | 応募数 |
| scout_application_count | スカウト経由応募数 |
| page_view_count | 求人詳細ページ閲覧数 |
| scraped_at | 取得日時 |

### 4.5 jobmedley_scouts テーブル

| カラム | 詳細 |
|--------|------|
| date | 取得日 |
| sent_count | スカウト送信数 |
| scraped_at | 取得日時 |

---

## 5. スクレイピング処理フロー

### 5.1 検索順位取得

```
1. ログイン（不要の可能性あり、公開ページなら）
2. 検索結果ページにアクセス（`jobmedley_search_url`）
3. ページ内を走査して医院名をマッチング
4. 順位を特定してDB保存
```

### 5.2 スカウトメール取得

```
1. ログイン（ID/Password）
2. スカウト管理ページにアクセス
3. 送信数・返信数を取得
4. DB保存
```

---

## 6. ダッシュボードUI

### 6.1 画面構成

```
/clinic/[slug]/job-medley
├── 月選択ボタン
├── 職種タブ（対象職種のみ表示）
├── サマリーカード
│   ├── 採用決定数
│   ├── 応募数
│   ├── スカウト経由応募数
│   └── 求人詳細ページ閲覧数
├── スカウトメールセクション
│   ├── 送信数（月100通中の消化数）
│   └── スカウト応募率（送信数に対する応募率）
└── 検索順位
    ├── 現在順位
    └── 確認日時
```

---

## 7. 実装タスク（Phase 2）

### 事前調査

- [x] ジョブメドレー管理画面の構造調査
- [x] 取得可能なデータの確認
- [x] ログイン方式の確認（2FA/CAPTCHAの有無）
- [x] 検索結果ページの構造確認

### 実装

- [x] ジョブメドレースクレイパー実装
- [x] 検索順位取得機能（`jobmedley_search_url` 設定時）
- [x] スカウトメール取得機能
- [x] ダッシュボードUI実装

---

## 8. 注意事項

### 8.1 競合優位性について

ジョブメドレーのスカウトメールは無料のため、競合他社も同様に送信可能。そのため：

- **スカウトメールの差別化は難しい**
- **検索順位の上位化が最も重要な施策**

### 8.2 検索順位最適化のポイント（参考）

- プロフィールの充実度
- 写真・動画の掲載
- 求人内容の詳細度
- 更新頻度

---

## 変更履歴

| 日付 | 内容 |
|------|------|
| 2025-12-30 | 初版作成 |
| 2025-12-31 | 実装状況と検索順位設定項目を更新 |
